@model IPagedList<Exposure.Entities.Incident>
@using PagedList;
@using PagedList.Mvc;
@using System.Web.Mvc;

@{
    ViewBag.Title = "Manage Incidents";
}
<h2>@ViewBag.Title</h2>
<a href="@Url.Action("Dashboard","Home")">Back to Management</a>
<table class="table table-striped table-bordered dt-nowrap">
    <tr>
        <th>
            Job
        </th>
        <th>
            Completion Date
        </th>
        <th>
            Reporter
        </th>
        <th>
            Offender
        </th>
        <th>
            Description
        </th>
        <th>
            Progress
        </th>
        <th></th>
    </tr>
    @if (ViewBag.Incidents != null)
    {
        foreach (var item in ViewBag.Incidents)
        {
            <tr>
                <td>
                    @item.Job.Title
                </td>
                <td>
                    @item.Job.EndDate
                </td>
                <td>
                    @item.UserIncidents.ApplicationUser.FirstName @item.UserIncidents.ApplicationUser.LastName
                </td>
                <td>
                    @item.ApplicationUser.FirstName @item.ApplicationUser.LastName

                </td>
                <td>
                    @item.Description
                </td>
                <td>
                    @item.Progress
                </td>
                <td>
                    <a href="#" class="btn btn-default">Investigate</a><br />
                    <a href="@Url.Action("Update", "Incidents", new { id = item.IncidentID })" class="btn btn-default">Update Progress</a><br />
                    <a href="@Url.Action("Details", "Incidents", new { id = item.IncidentID })" class="btn btn-info"><i class="glyphicon glyphicon-list"></i></a>
                </td>
            </tr>
        }
    }

</table>
@if(ViewBag.Incidents == null)
{
    <div class="alert alert-info alert-dismissable" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <i class="glyphicon glyphicon-exclamation-sign glyphicon-"
    </div>
}
