@model PagedList.IPagedList<Exposure.Entities.Job>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css"/>
@{
    ViewBag.Title = "Job Search";
}

<h2>@ViewBag.Title</h2><br />
@using (Html.BeginForm("Search", "Jobs", FormMethod.Get))
{
    <div class="row">
        <div class="col-md-2">
            <p>Category: </p>@Html.DropDownList("skill", null, "All", new { @class = "form-control" })
        </div>
        <div class="col-md-2">
            <p>Location: </p>@Html.DropDownList("location", null, "All", new { @class="form-control"})
        </div>
        <div class="col-md-2">
            <p>Sort by: </p>@Html.DropDownList("sortOrder",new SelectList(
                           new List<Object>
                       {
                           new{value="date", text= "Date Advertised"},
                           new{value="date_desc", text="Date Advitised(Desc)"},
                           new {value="rate", text="Rate"},
                           new {value="rate_desc", text="Rate(Desc)"}
                       },
                       "value", "text", 2), new { @class = "form-control" })
        </div>
        <div class="col-md-2">
            <p>Search: </p>@Html.Editor("search", new {htmlAttributes =  new { @class = "form-control" }})
        </div>
        <div class="col-md-4">
            <br/>
                <input type="submit" class="btn btn-default" value="Filter" />            
        </div>
    </div>
}
<br/>
<div class="col-md-12">
    <table class="table">
        @foreach (var item in ViewBag.Jobs)
        {
            <tr>
                <td>                
                    <a href="@Url.Action("Create", "JobApplications", new { id = item.JobID })">@item.Title</a><br />
                    <strong>Location:</strong> @item.Suburb.SubName <br />
                    <strong>Rate(ZAR):</strong> @item.Rate <br />
                    <strong>Start Date:</strong> @item.StartDate<br />
                    <strong>Employer:</strong> @item.Employer.ApplicationUser.FirstName  @item.Employer.ApplicationUser.LastName<br />
                    <strong>Description: </strong> <br/>
                    @item.Description<br />                                
                </td>
                <td align="right">
                    <strong>Date Advertised:</strong><br/>
                    @item.DateAdvertised
                </td>
            </tr>

        }
    </table>
    
</div>

<br/>
@*Page @(Model.PageCount <Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

@Html.PagedListPager(Model, page => Url.Action("Index", new { page, sortOrder= ViewBag.CurrentSort,
    currentFilter = ViewBag.CurrentFilter}))*@
